---
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const projects = [
    {
        title: "Cloud Infrastructure Automation",
        description:
            lang === "es"
                ? "Automatización de infraestructura multicloud (AWS/GCP) usando Terraform."
                : "Multi-cloud infrastructure automation (AWS/GCP) using Terraform.",
        link: `/${lang}/construction`,
        tags: ["Terraform", "AWS", "GCP"],
    },
    {
        title: "K8s Cluster Management",
        description:
            lang === "es"
                ? "Diseño y administración de clusters de Kubernetes (EKS, GKE, AKS)."
                : "Design and management of Kubernetes clusters (EKS, GKE, AKS).",
        link: `/${lang}/construction`,
        tags: ["Kubernetes", "Docker", "Helm"],
    },
    {
        title: "CI/CD Pipeline Design",
        description:
            lang === "es"
                ? "Implementación de pipelines robustos con Jenkins, Azure DevOps y GitHub Actions."
                : "Robust pipeline implementation with Jenkins, Azure DevOps, and GitHub Actions.",
        link: `/${lang}/construction`,
        tags: ["Jenkins", "GitHub Actions", "GitLab CI"],
    },
];
---

<section id="projects" class="container">
    <div class="header">
        <h2>{t("projects.title")}</h2>
        <p>{t("projects.description")}</p>
    </div>
    <div class="grid">
        {
            projects.map((project) => (
                <div class="project-card glass hover-lift">
                    <div class="tags">
                        {project.tags.map((tag) => (
                            <span class="tag">{tag}</span>
                        ))}
                    </div>
                    <h3>{project.title}</h3>
                    <p>{project.description}</p>
                    <a href={project.link} class="link">
                        {t("projects.view")} <span>→</span>
                    </a>
                </div>
            ))
        }
    </div>
</section>

<style>
    #projects {
        padding: 100px 2rem;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
    }

    .header {
        margin-bottom: 4rem;
    }

    h2 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 2rem;
    }

    .project-card {
        padding: 2rem;
        border-radius: 1.5rem;
        display: flex;
        flex-direction: column;
    }

    .tags {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 1.5rem;
    }

    .tag {
        font-size: 0.75rem;
        padding: 0.25rem 0.75rem;
        border-radius: 99rem;
        background: var(--glass-border);
        color: var(--text-secondary);
    }

    h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    .project-card p {
        color: var(--text-secondary);
        line-height: 1.6;
        margin-bottom: 2rem;
        flex-grow: 1;
    }

    .link {
        font-weight: 600;
        color: var(--accent-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .link span {
        transition: transform 0.2s;
    }

    .link:hover span {
        transform: translateX(4px);
    }
</style>
